<div class="video-container" *ngIf="!foto">
    <video #video autoplay playsinline></video>
    <div *ngIf="!permisos" class="sinPermisos"><p>Para activar la cámara se necesita aceptar los permisos</p></div>
    <button (click)="tomarFoto()" class="capture-button"></button>
</div>

<div *ngIf="foto" class="video-container">
    <img [src]="foto" alt="Foto tomada" class="fotoTomada">
    <div class="opcionesFoto">
        <button class="icono" (click)="modalBorrarFoto = true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" width="24px" height="24px"><path d="M11.9997 10.5865L16.9495 5.63672L18.3637 7.05093L13.4139 12.0007L18.3637 16.9504L16.9495 18.3646L11.9997 13.4149L7.04996 18.3646L5.63574 16.9504L10.5855 12.0007L5.63574 7.05093L7.04996 5.63672L11.9997 10.5865Z"></path></svg></button>
        <div>
            <a [href]="foto" [download]="nombreArchivo ? nombreArchivo : 'instaPic.png'" class="icono">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" width="24px" height="24px"><path d="M3 19H21V21H3V19ZM13 13.1716L19.0711 7.1005L20.4853 8.51472L12 17L3.51472 8.51472L4.92893 7.1005L11 13.1716V2H13V13.1716Z"></path></svg>
            </a>
        </div>
    </div>
</div>

<div class="panelControl">
    <input type="file" #archivo hidden (change)="elegirFoto($event)" accept="image/*">
    <button (click)="archivo.click()" style="all: unset; cursor: pointer; color: white;"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" width="28px"><path d="M2.9918 21C2.44405 21 2 20.5551 2 20.0066V3.9934C2 3.44476 2.45531 3 2.9918 3H21.0082C21.556 3 22 3.44495 22 3.9934V20.0066C22 20.5552 21.5447 21 21.0082 21H2.9918ZM20 15V5H4V19L14 9L20 15ZM20 17.8284L14 11.8284L6.82843 19H20V17.8284ZM8 11C6.89543 11 6 10.1046 6 9C6 7.89543 6.89543 7 8 7C9.10457 7 10 7.89543 10 9C10 10.1046 9.10457 11 8 11Z"></path></svg></button>
    <button style="all: unset; cursor: pointer; color: white;" (click)="frontCamera = !frontCamera; ngAfterViewInit()"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" width="28px"><path d="M9.82843 5L7.82843 7H4V19H20V7H16.1716L14.1716 5H9.82843ZM9 3H15L17 5H21C21.5523 5 22 5.44772 22 6V20C22 20.5523 21.5523 21 21 21H3C2.44772 21 2 20.5523 2 20V6C2 5.44772 2.44772 5 3 5H7L9 3ZM9.64042 7.53044C10.3555 7.19033 11.1555 7 12 7C15.0376 7 17.5 9.46243 17.5 12.5C17.5 14.05 16.8588 15.4502 15.8273 16.4499L13.75 12.6H15.4986C15.4995 12.5668 15.5 12.5334 15.5 12.5C15.5 10.567 13.933 9 12 9C11.4912 9 11.0078 9.10856 10.5716 9.30378L9.64042 7.53044ZM14.3175 17.4894C13.6132 17.817 12.828 18 12 18C8.96243 18 6.5 15.5376 6.5 12.5C6.5 10.9678 7.12654 9.58193 8.13738 8.58462L10.25 12.5H8.5C8.5 14.433 10.067 16 12 16C12.4923 16 12.9608 15.8984 13.3857 15.715L14.3175 17.4894Z"></path></svg></button>
    
    <div>

    </div>
</div>

<div *ngIf="modalBorrarFoto" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0, 0, 0, 0.511);"></div>
<div *ngIf="modalBorrarFoto" class="modalBorrarFoto">
    <p class="modal__titulo">¿Descartar elementos multimedia?</p>
    <p class="modal__desc">Si sales ahora, se perderán los cambios que hayas hecho.</p>
    <div class="modal__botones">
        <button (click)="borrarFoto()" style="color: var(--rojo);">Descartar</button>
        <button style="color: var(--azul);" (click)="modalBorrarFoto = false">Conservar</button>
    </div>
</div>
<canvas #canvas style="display:none;"></canvas>